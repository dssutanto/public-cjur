{"version":3,"file":"component---src-pages-browse-js-08d9b96ba5e3e4d4f283.js","mappings":"8NAwFA,UAjFqB,SAAC,GAEf,IAAD,IADJA,KAAQC,EACJ,EADIA,UAWFC,GAVF,EADeC,QAWJ,IAuBf,SAASC,EAAOC,GAOd,OALMA,EAAMA,MAAMC,YACVD,EAAME,IAENF,EAAMG,aAAaC,QAAQC,aAKrC,OAhCAT,EAAUU,MAAMC,QAAO,SAACC,GAAD,QACnBA,EAAKR,MAAMC,eAAgCO,EAAKL,aAAaM,kBAC/DC,KAAI,SAACF,GAAD,OACJX,EAAOc,KAAKH,MA8BZ,gBAAC,IAAD,CAAQI,MAAM,UACZ,gBAAC,IAAD,CAAKA,MAAM,cACX,8BACE,sBAAIC,UAAU,eAAeC,SAAS,YAAtC,WAEF,2BAASD,UAAU,gBACjB,6FAQF,uBAAKA,UAAU,kBACb,uBAAKA,UAAU,0BACZhB,EAAOa,KAAI,SAAAV,GAAK,OACf,uBAAKe,IAAKhB,EAAOC,GAAQa,UAAU,eACjC,qBAAGG,KAAMjB,EAAOC,GAAQa,UAAU,iBAChC,uBAAKA,UAAU,iBACb,uBAAKI,IAAKjB,EAAMA,MAAMkB,MAAMb,aAAcc,IAAI,GAAGN,UAAU,WAE7D,+BACE,2BAAKO,EAAAA,EAAAA,IAAMpB,EAAMY,QACjB,0BAnDhB,SAAiBZ,GAaf,OAXMA,EAAMA,MAAMC,YACT,IAAIoB,KACTrB,EAAMA,MAAMsB,SAASC,UAAU,EAAG,GAClCvB,EAAMA,MAAMsB,SAASC,UAAU,EAAG,IAClCC,eAAe,UAAW,CAAEC,MAAO,OAAQC,KAAM,YAE5C,IAAIL,KACTrB,EAAMG,aAAawB,UAAUJ,UAAU,EAAG,GAC1CvB,EAAMG,aAAawB,UAAUJ,UAAU,EAAG,IAC1CC,eAAe,UAAW,CAAEC,MAAO,OAAQC,KAAM,YAwClCE,CAAQ5B","sources":["webpack://canadian-journal-of-undergraduate-research/./src/pages/browse.js"],"sourcesContent":["import React from \"react\"\r\nimport { graphql } from \"gatsby\"\r\nimport parse from \"html-react-parser\"\r\n\r\nimport Layout from \"../components/layout\"\r\nimport Seo from \"../components/seo\"\r\n\r\nconst BrowseIssues = ({\r\n  data: { allWpPage, allFile },\r\n}) => {\r\n  // const files = allFile.nodes\r\n  // function findFile(url) {\r\n  //   let link\r\n  //   files.forEach((file) => {\r\n  //     if (file.publicURL.split(\"/\").at(-1) === url.split(\"/\").at(-1)) link = file.publicURL\r\n  //   })\r\n  //   return link\r\n  // }\r\n\r\n  const issues = []\r\n  allWpPage.nodes.filter((page) =>\r\n    !!page.issue.isIssuePage ? true : false || !!page.specialIssue.isSpecialIssue ? true : false\r\n  ).map((page) =>\r\n    issues.push(page)\r\n  )\r\n\r\n  function pubDate(issue) {\r\n    var date;\r\n    if (!!issue.issue.isIssuePage) {\r\n      date = new Date(\r\n        issue.issue.released.substring(0, 4),\r\n        issue.issue.released.substring(4, 6)\r\n      ).toLocaleString('default', { month: 'long', year: 'numeric' })\r\n    } else {\r\n      date = new Date(\r\n        issue.specialIssue.published.substring(0, 4),\r\n        issue.specialIssue.published.substring(4, 6)\r\n      ).toLocaleString('default', { month: 'long', year: 'numeric' })\r\n    }\r\n    return date;\r\n  }\r\n\r\n  function getKey(issue) {\r\n    let key;\r\n    if (!!issue.issue.isIssuePage) {\r\n      key = issue.uri\r\n    } else {\r\n      key = issue.specialIssue.pdfLink.mediaItemUrl\r\n    }\r\n    return key;\r\n  }\r\n\r\n  return (\r\n    <Layout title=\"Browse\">\r\n      <Seo title=\"All pages\" />\r\n      <header>\r\n        <h1 className=\"main-heading\" itemProp=\"headline\">Browse</h1>\r\n      </header>\r\n      <article className=\"default-page\">\r\n        <p>All of our articles, issues, and special editions in one place.</p>\r\n      </article>\r\n      {/* <article className=\"browse-body\"> */}\r\n      {/* <div className=\"browse-section\"> */}\r\n      {/* <div className=\"browse-section-wrapper\">\r\n          <h2>Issues</h2>\r\n        </div> */}\r\n      {/* </div> */}\r\n      <div className=\"browse-section\">\r\n        <div className=\"browse-section-wrapper\">\r\n          {issues.map(issue => (\r\n            <div key={getKey(issue)} className=\"issue-block\">\r\n              <a href={getKey(issue)} className=\"issue-display\">\r\n                <div className=\"image-wrapper\">\r\n                  <img src={issue.issue.cover.mediaItemUrl} alt=\"\" className=\"cover\" />\r\n                </div>\r\n                <section>\r\n                  <h3>{parse(issue.title)}</h3>\r\n                  <h5>{pubDate(issue)}</h5>\r\n                </section>\r\n              </a>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nexport default BrowseIssues\r\n\r\nexport const pageQuery = graphql`\r\n  query allIssues {\r\n    allWpPage(\r\n      sort: { fields: [date], order: DESC }\r\n    ) {\r\n      nodes {\r\n        id\r\n        uri\r\n        issue {\r\n          isIssuePage\r\n          status\r\n          released\r\n          leadArticle {\r\n            ... on WpPost {\r\n              id\r\n              title\r\n            }\r\n          }\r\n          cover {\r\n            mediaItemUrl\r\n          }\r\n        }\r\n        specialIssue {\r\n          isSpecialIssue\r\n          description\r\n          cover {\r\n            mediaItemUrl\r\n          }\r\n          pdfLink {\r\n            mediaItemUrl\r\n          }\r\n          published\r\n        }\r\n        title\r\n      }\r\n    }\r\n    allFile {\r\n      nodes {\r\n        publicURL\r\n      }\r\n    }\r\n  }\r\n`\r\n"],"names":["data","allWpPage","issues","allFile","getKey","issue","isIssuePage","uri","specialIssue","pdfLink","mediaItemUrl","nodes","filter","page","isSpecialIssue","map","push","title","className","itemProp","key","href","src","cover","alt","parse","Date","released","substring","toLocaleString","month","year","published","pubDate"],"sourceRoot":""}